webpackJsonp([5],{"J/Ak":function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var r=a("0xDb"),i=a("sNv2"),p=a("JQQh"),s=a("jBdW"),l={components:{BaseSelect:i.a,DevTypeSelect:p.a,DevStatusSelect:s.a},data:function(){return{totalCount:0,list:[],listLoading:!1,listQuery:{pageNum:1,pageRow:50},dialogStatus:"create",dialogFormVisible:!1,tempPart:{partID:"",partType:{defID:0,defName:""},partStatus:{defID:0,defName:""},partBatchNum:"",partNote:""}}},created:function(){this.getParts()},methods:{getParts:function(){var t=this;this.listLoading=!0,this.api({url:"/part/list",method:"get",params:this.listQuery}).then(function(e){console.log(e),t.list=e.list,t.listLoading=!1,t.totalCount=e.totalCount})},handleSizeChange:function(t){this.listQuery.pageRow=t,this.handleFilter()},handleCurrentChange:function(t){this.listQuery.pageNum=t,this.getParts()},handleFilter:function(){this.listQuery.pageNum=1,this.getParts()},showUpdate:function(t){this.tempPart.partID=t.row.partID,this.tempPart.partType.defID=t.row.partTypeID,this.tempPart.partType.defName=t.row.partType,this.tempPart.partStatus.defID=t.row.partStatusID,this.tempPart.partStatus.defName=t.row.partStatus,this.tempPart.partBatchNum=t.row.partBatchNum,this.tempPart.partNote=t.row.partNote,this.dialogStatus="update",this.dialogFormVisible=!0},showCreate:function(){this.tempPart.partID="",this.tempPart.partType.defID=-1,this.tempPart.partType.defName="",this.tempPart.partStatus.defID=-1,this.tempPart.partStatus.defName="",this.tempPart.partBatchNum="",this.tempPart.partNote="",this.dialogStatus="create",this.dialogFormVisible=!0},createPart:function(){var t=this;this.api({url:"/part/add",method:"get",params:{partID:this.tempPart.partID,partTypeID:this.tempPart.partType.defID,partStatusID:this.tempPart.partStatus.defID,partBatchNum:this.tempPart.partBatchNum,partNote:this.tempPart.partNote}}).then(function(e){t.$message.success("创建成功"),t.dialogFormVisible=!1,t.getParts()})},updatePart:function(t){var e=this;this.api({url:"/part/update",method:"get",params:{partID:this.tempPart.partID,partTypeID:this.tempPart.partType.defID,partStatusID:this.tempPart.partStatus.defID,partBatchNum:this.tempPart.partBatchNum,partNote:this.tempPart.partNote}}).then(function(t){e.dialogFormVisible=!1;var a=e.list.findIndex(function(t){return t.partID==e.tempPart.partID});a>=0&&(e.list[a].partType=e.tempPart.partType.defName,e.list[a].partTypeID=e.tempPart.partType.defID,e.list[a].partStatus=e.tempPart.partStatus.defName,e.list[a].partStatusID=e.tempPart.partStatus.defID,e.list[a].partBatchNum=e.tempPart.partBatchNum,e.list[a].partNote=e.tempPart.partNote)})},timeFormatter2:function(t,e,a,i){return Object(r.a)(a)}}},o=a("XyMi"),n=Object(o.a)(l,function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"filter-container"},[a("el-form",[a("el-form-item",[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"part:add",expression:"'part:add'"}],attrs:{type:"primary",icon:"plus"},on:{click:function(e){return t.showCreate()}}},[t._v("添加 ")])],1)],1)],1),t._v(" "),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],attrs:{data:t.list,border:"",fit:"","highlight-current-row":""}},[a("el-table-column",{staticStyle:{width:"20%"},attrs:{align:"center",label:"配件编号",prop:"partID"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"配件类型",prop:"partType"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"配件状态",prop:"partStatus"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"批次",prop:"partBatchNum"}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"备注",prop:"partNote","show-overflow-tooltip":""}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"创建时间",prop:"createTime",formatter:t.timeFormatter2}}),t._v(" "),a("el-table-column",{attrs:{align:"center",label:"管理",width:"140",fixed:"right"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"part:update",expression:"'part:update'"}],attrs:{type:"primary",icon:"el-icon-edit",size:"mini"},on:{click:function(a){return t.showUpdate(e)}}}),t._v(" "),a("el-button",{directives:[{name:"permission",rawName:"v-permission",value:"part:delete",expression:"'part:delete'"}],attrs:{type:"danger",icon:"el-icon-delete",size:"mini"}})]}}])})],1),t._v(" "),a("el-pagination",{attrs:{"current-page":t.listQuery.pageNum,"page-size":t.listQuery.pageRow,total:t.totalCount,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}}),t._v(" "),a("el-dialog",{attrs:{title:"配件",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e}}},[a("el-form",{staticClass:"small-space",staticStyle:{width:"300px","margin-left":"50px"},attrs:{model:t.tempPart,"label-position":"left","label-width":"80px"}},[a("el-form-item",{attrs:{label:"配件编号",required:"",placeholder:"请输入"}},[a("el-input",{attrs:{type:"text"},model:{value:t.tempPart.partID,callback:function(e){t.$set(t.tempPart,"partID",e)},expression:"tempPart.partID"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"配件类型",required:""}},[a("el-select",{attrs:{placeholder:"请选择","value-key":"defID"},model:{value:t.tempPart.partType,callback:function(e){t.$set(t.tempPart,"partType",e)},expression:"tempPart.partType"}},t._l(t.$store.getters.partType,function(t){return a("el-option",{key:t.defID,attrs:{label:t.defName,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"配件状态",required:""}},[a("el-select",{attrs:{placeholder:"请选择","value-key":"defID"},model:{value:t.tempPart.partStatus,callback:function(e){t.$set(t.tempPart,"partStatus",e)},expression:"tempPart.partStatus"}},t._l(t.$store.getters.partStatus,function(t){return a("el-option",{key:t.defID,attrs:{label:t.defName,value:t}})}),1)],1),t._v(" "),a("el-form-item",{attrs:{label:"批次"}},[a("el-input",{attrs:{type:"text"},model:{value:t.tempPart.partBatchNum,callback:function(e){t.$set(t.tempPart,"partBatchNum",e)},expression:"tempPart.partBatchNum"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"备注"}},[a("el-input",{attrs:{type:"text"},model:{value:t.tempPart.partNote,callback:function(e){t.$set(t.tempPart,"partNote",e)},expression:"tempPart.partNote"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.dialogFormVisible=!1}}},[t._v("取 消")]),t._v(" "),"create"===t.dialogStatus?a("el-button",{attrs:{type:"success"},on:{click:t.createPart}},[t._v("创 建")]):a("el-button",{attrs:{type:"primary"},on:{click:t.updatePart}},[t._v("修 改")])],1)],1)],1)},[],!1,null,null,null);e.default=n.exports}});